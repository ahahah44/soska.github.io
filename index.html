<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wednesday</title>
    <meta name="theme-color" content="#8B0000">
    <style>
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }
        
        body { 
            font-family: Arial, sans-serif; 
            color: #fff; 
            background: #000; 
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            width: 100%;
            max-width: 500px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 2rem;
            color: #FF0000;
            text-transform: uppercase;
        }
        
        .gif-container {
            width: 100%;
            border: 3px solid #8B0000;
            border-radius: 15px;
            overflow: hidden;
            cursor: pointer;
            margin-bottom: 1rem;
        }
        
        .gif-container img {
            width: 100%;
            height: auto;
            display: block;
        }
        
        .hint {
            color: #ccc;
            font-size: 1.1rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Wednesday</h1>
        
        <div class="gif-container" onclick="playSound()">
            <img id="prankImage" src="" alt="Wednesday GIF">
        </div>
        
        <div class="hint">Нажми на GIF для звука</div>
    </div>

    <script>
        let audio = null;
        let audioLoaded = false;
        
        // Загружаем файлы
        function loadFiles() {
            // Определяем базовый URL
            let baseUrl = './files/';
            if (window.location.href.includes('github.io')) {
                const path = window.location.href.split('/').slice(0, -1).join('/');
                baseUrl = path + '/files/';
            }
            
            // Загружаем GIF
            document.getElementById('prankImage').src = baseUrl + 'prank.gif?' + Date.now();
            
            // Создаем и загружаем аудио
            audio = new Audio();
            audio.preload = "auto";
            
            audio.oncanplaythrough = function() {
                audioLoaded = true;
                console.log('Звук загружен');
            };
            
            audio.onerror = function() {
                console.log('Ошибка загрузки звука');
            };
            
            audio.src = baseUrl + 'sound.mp3?' + Date.now();
        }
        
        // Воспроизведение звука
        function playSound() {
            if (!audioLoaded || !audio) {
                console.log('Звук еще не загружен');
                return;
            }
            
            // Останавливаем и перематываем
            audio.pause();
            audio.currentTime = 0;
            
            // Пытаемся воспроизвести
            audio.play().then(() => {
                console.log('Звук воспроизводится');
            }).catch(error => {
                console.log('Ошибка воспроизведения:', error);
                
                // Показываем сообщение об ошибке
                alert('Нажмите "Разрешить" если браузер запросил разрешение на звук. Затем нажмите на GIF еще раз.');
            });
        }
        
        // Загружаем файлы при старте
        window.onload = loadFiles;
        
        // Также пробуем активировать звук при любом клике на странице
        document.body.addEventListener('click', function() {
            if (audio && audioLoaded) {
                // Просто активируем аудио контекст
                audio.volume = 0.01;
                audio.play().then(() => {
                    audio.pause();
                    audio.currentTime = 0;
                    audio.volume = 1.0;
                }).catch(() => {});
            }
        });
    </script>
</body>
</html>
